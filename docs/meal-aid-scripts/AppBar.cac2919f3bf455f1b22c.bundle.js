"use strict";(self.webpackChunkmealaid=self.webpackChunkmealaid||[]).push([[679],{2989:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(7294),l=n(6974),a=n(4438),o=n(3970),c=n(7672),s=n(8201),u=n(7720),i=n(6867),m=n(799),E=n(9334),h=n(4784),d=n(5305);function p(){var e;const{realm:t,user:n,setUser:p}=r.useContext(o._),f=function(e){const[t,n]=r.useState(null);return{anchorEl:t,isAnchored:Boolean(t),onClick:e=>{n(e.currentTarget||e.target)},onClose:()=>{n(null)}}}(),Z=(0,l.s0)(),C=(0,c.Z)(null);r.useEffect((()=>{C.time>0&&!C.error&&(f.onClose(),Z(a.HOME_ROUTE_ID))}),[C.time]);const g=n&&"anon-user"!==n.providerType;return r.createElement(r.Fragment,null,r.createElement(i.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-user-appbar","aria-haspopup":"true",onClick:f.onClick,color:"inherit"},r.createElement(s.Z,null)),r.createElement(h.Z,{open:f.isAnchored,onClose:f.onClose,anchorEl:f.anchorEl},g&&r.createElement(m.ZP,null,r.createElement(E.Z,{primary:`${(null==n||null==(e=n.customData)?void 0:e.name)||""}`,secondary:n.profile.email})),g&&r.createElement(u.Z,null),r.createElement(d.Z,{onClick:g?()=>{t.currentUser&&(p(null),C.fetch((()=>t.currentUser.logOut())))}:()=>{Z(a.LOGIN_ROUTE_ID),f.onClose()}},"Log ",g?"out":"in")))}var f=n(6638),Z=n(9602),C=n(3720),g=n(6914),v=n(4386);function k(){const e=(0,l.s0)();return r.createElement(C.Z,{position:"static"},r.createElement(v.Z,{variant:"dense"},r.createElement(O,null,r.createElement(g.Z,{startIcon:r.createElement(f.Z,null),onClick:()=>e(a.HOME_ROUTE_ID),color:"inherit",title:"Meal-Aid home page"},"Meal-Aid")),r.createElement("div",null,r.createElement(p,null))))}const O=(0,Z.ZP)("div")({flexGrow:1})},7672:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7294);function l(e){const[t,n]=r.useState(e),[l,a]=r.useState(!1),[o,c]=r.useState(""),[s,u]=r.useState(0),[i,m]=r.useState(!1);return{value:t,fetch:e=>Promise.resolve().then((()=>{a(!0),c(""),m(!1)})).then(e).then((e=>(i||(n(e),u((new Date).getTime()),a(!1)),e))).catch((e=>{i||(c(`${e&&(e.error||e.message)||"Unknown error"}`),a(!1))})),setValue:n,loading:l,time:s,errorMsg:o,setErrorMsg:c,error:Boolean(o),cancelled:i,cancel:()=>m(!0)}}}}]);